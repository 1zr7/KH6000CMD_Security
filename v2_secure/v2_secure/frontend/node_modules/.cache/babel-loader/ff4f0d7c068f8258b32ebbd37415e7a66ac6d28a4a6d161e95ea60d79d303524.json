{"ast":null,"code":"const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\nconst request = async (endpoint, options = {}) => {\n  const res = await fetch(`${API_URL}${endpoint}`, {\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers\n    },\n    credentials: 'include',\n    // Include cookies\n    ...options\n  });\n  const data = await res.json();\n  console.log(`[API] ${endpoint}`, data); // WARNING: Insecure logging\n  return data;\n};\nexport const login = (username, password) => request('/auth/login', {\n  method: 'POST',\n  body: JSON.stringify({\n    username,\n    password\n  })\n});\nexport const verifyOTP = (username, otp) => request('/auth/verify-otp', {\n  method: 'POST',\n  body: JSON.stringify({\n    username,\n    otp\n  })\n});\nexport const logout = () => request('/auth/logout', {\n  method: 'POST'\n});\n\n// Old MFA implementation removed/replaced\n// export const setupMFA = ...\n\nexport const register = data => request('/auth/register', {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\nexport const changePassword = (username, newPassword) => request('/auth/password', {\n  method: 'PUT',\n  body: JSON.stringify({\n    username,\n    newPassword\n  })\n});\nexport const getPatients = () => request('/patients');\nexport const searchPatients = q => request(`/patients/search?q=${q}`);\nexport const getPatientAppointments = id => request(`/patients/${id}/appointments`);\nexport const createAppointment = data => request('/patients/appointments', {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\nexport const getUsers = () => request('/admin/users');\nexport const createUser = data => request('/admin/users', {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\nexport const deleteUser = id => request(`/admin/users/${id}`, {\n  method: 'DELETE'\n});\nexport const getDoctorDetails = doctorId => request(`/doctor/${doctorId}/details`);\nexport const assignNurse = (doctorId, nurseId) => request(`/doctor/${doctorId}/assign-nurse`, {\n  method: 'POST',\n  body: JSON.stringify({\n    nurseId\n  })\n});\nexport const assignPatient = (doctorId, patientId) => request(`/doctor/${doctorId}/assign-patient`, {\n  method: 'POST',\n  body: JSON.stringify({\n    patientId\n  })\n});\nexport const getDoctorAppointments = doctorId => request(`/doctor/${doctorId}/appointments`);\nexport const acceptAppointment = id => request(`/doctor/appointments/${id}/accept`, {\n  method: 'PUT'\n});\nexport const rejectAppointment = id => request(`/doctor/appointments/${id}/reject`, {\n  method: 'PUT'\n});\nexport const createDiagnosis = (id, doctorId, description) => request(`/doctor/appointments/${id}/diagnosis`, {\n  method: 'POST',\n  body: JSON.stringify({\n    doctorId,\n    description\n  })\n});\nexport const getNurseAppointments = nurseId => request(`/nurse/${nurseId}/appointments`);\nexport const createMedication = (id, data) => request(`/nurse/appointments/${id}/medication`, {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\nexport const deleteMedication = id => request(`/nurse/medications/${id}`, {\n  method: 'DELETE'\n});","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","request","endpoint","options","res","fetch","headers","credentials","data","json","console","log","login","username","password","method","body","JSON","stringify","verifyOTP","otp","logout","register","changePassword","newPassword","getPatients","searchPatients","q","getPatientAppointments","id","createAppointment","getUsers","createUser","deleteUser","getDoctorDetails","doctorId","assignNurse","nurseId","assignPatient","patientId","getDoctorAppointments","acceptAppointment","rejectAppointment","createDiagnosis","description","getNurseAppointments","createMedication","deleteMedication"],"sources":["C:/Users/h1zr7/OneDrive/Desktop/KH6000CMD_Security/v2_secure/v2_secure/frontend/src/api.js"],"sourcesContent":["const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\r\n\r\nconst request = async (endpoint, options = {}) => {\r\n    const res = await fetch(`${API_URL}${endpoint}`, {\r\n        headers: { 'Content-Type': 'application/json', ...options.headers },\r\n        credentials: 'include', // Include cookies\r\n        ...options,\r\n    });\r\n    const data = await res.json();\r\n    console.log(`[API] ${endpoint}`, data); // WARNING: Insecure logging\r\n    return data;\r\n};\r\n\r\nexport const login = (username, password) => request('/auth/login', {\r\n    method: 'POST',\r\n    body: JSON.stringify({ username, password }),\r\n});\r\n\r\nexport const verifyOTP = (username, otp) => request('/auth/verify-otp', {\r\n    method: 'POST',\r\n    body: JSON.stringify({ username, otp }),\r\n});\r\n\r\nexport const logout = () => request('/auth/logout', { method: 'POST' });\r\n\r\n// Old MFA implementation removed/replaced\r\n// export const setupMFA = ...\r\n\r\nexport const register = (data) => request('/auth/register', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n});\r\n\r\nexport const changePassword = (username, newPassword) => request('/auth/password', {\r\n    method: 'PUT',\r\n    body: JSON.stringify({ username, newPassword }),\r\n});\r\n\r\nexport const getPatients = () => request('/patients');\r\nexport const searchPatients = (q) => request(`/patients/search?q=${q}`);\r\nexport const getPatientAppointments = (id) => request(`/patients/${id}/appointments`);\r\nexport const createAppointment = (data) => request('/patients/appointments', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n});\r\n\r\nexport const getUsers = () => request('/admin/users');\r\nexport const createUser = (data) => request('/admin/users', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n});\r\nexport const deleteUser = (id) => request(`/admin/users/${id}`, { method: 'DELETE' });\r\n\r\nexport const getDoctorDetails = (doctorId) => request(`/doctor/${doctorId}/details`);\r\nexport const assignNurse = (doctorId, nurseId) => request(`/doctor/${doctorId}/assign-nurse`, {\r\n    method: 'POST',\r\n    body: JSON.stringify({ nurseId }),\r\n});\r\nexport const assignPatient = (doctorId, patientId) => request(`/doctor/${doctorId}/assign-patient`, {\r\n    method: 'POST',\r\n    body: JSON.stringify({ patientId }),\r\n});\r\nexport const getDoctorAppointments = (doctorId) => request(`/doctor/${doctorId}/appointments`);\r\nexport const acceptAppointment = (id) => request(`/doctor/appointments/${id}/accept`, { method: 'PUT' });\r\nexport const rejectAppointment = (id) => request(`/doctor/appointments/${id}/reject`, { method: 'PUT' });\r\nexport const createDiagnosis = (id, doctorId, description) => request(`/doctor/appointments/${id}/diagnosis`, {\r\n    method: 'POST',\r\n    body: JSON.stringify({ doctorId, description }),\r\n});\r\n\r\nexport const getNurseAppointments = (nurseId) => request(`/nurse/${nurseId}/appointments`);\r\nexport const createMedication = (id, data) => request(`/nurse/appointments/${id}/medication`, {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n});\r\nexport const deleteMedication = (id) => request(`/nurse/medications/${id}`, { method: 'DELETE' });\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}